import { memo, useRef } from "react"
import useViewLayout from "@/hooks/useViewLayout"
import View from "@/components/ui/view"
import type { View as RNView } from "react-native"

export const Measure = memo(({ children, id }: { children: React.ReactNode; id?: string }) => {
	const viewRef = useRef<RNView>(null)
	const { layout, onLayout } = useViewLayout(viewRef)

	if (!__DEV__) {
		return children
	}

	console.log("Measure layout:", id, `WxH ${layout.width}x${layout.height}`)

	return (
		<View
			ref={viewRef}
			onLayout={onLayout}
		>
			{children}
		</View>
	)
})

Measure.displayName = "Measure"

export default Measure
